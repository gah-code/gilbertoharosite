{"componentChunkName":"component---src-templates-blog-post-js","path":"/blogs/gatsby-contentful-seo-update-01","result":{"data":{"contentfulBlogPost":{"id":"c96653ba-5973-5247-b9b9-61efe60afe4c","slug":"gatsby-contentful-seo-update-01","title":"Updating SEO Functionality in Gatsby with Contentful","seoTitle":"Step One | Update SEO Functionality Base Step","seoDescription":{"seoDescription":"Prioritize Contentful for better metadata control, Use dynamic methods to prevent trailing slashes, Configure settings to enforce site-wide URL consistency."},"html":"<h4>1. Integrating seoTitle from Contentful</h4><p>To ensure that each page dynamically pulls its SEO title from Contentful, update your <code>Head</code> component as follows:</p><h4><b>Updated </b><b><code>Head</code></b><b> Component</b></h4><p><code>import SEOHead from &quot;../components/head&quot;\n\nexport const Head = (props) =&gt; {\n  const { page, site, contentfulPage } = props.data\n  const siteMetadata = site.siteMetadata\n\n  const title = contentfulPage?.seoTitle || page.title || siteMetadata.title\n  const description = page.description || siteMetadata.description\n  const image = page.image || null\n  const url = normalizeUrl(`${siteMetadata.siteUrl}/${page.slug}`)\n\n  return (\n    &lt;SEOHead\n      title={title}\n      description={description}\n      image={image}\n      url={url}\n    /&gt;\n  )\n}</code></p><hr/><p></p><h4><b>GraphQL Query Update</b></h4><p>Ensure the query includes <code>seoTitle</code> from Contentful:</p><p><code>query PageContent($id: String!) {\n  site {\n    siteMetadata {\n      siteUrl\n      title\n      description\n    }\n  }\n  contentfulPage {\n    seoTitle\n  }\n  page(id: { eq: $id }) {\n    id\n    title\n    slug\n    description\n    image {\n      id\n      url\n    }\n    html\n  }\n}</code></p><hr/><h3><b>2. Preventing Trailing Slashes in URLs</b></h3><p>To remove trailing slashes from URLs, define and apply a helper function when constructing SEO metadata.</p><h4><b>Utility Function</b></h4><p><code>const normalizeUrl = (url) =&gt; url?.replace(/\\/$/, &quot;&quot;)</code></p><h4><b>Update </b><b><code>SEOHead</code></b><b> Component</b></h4><p><code>import React from &quot;react&quot;\n\nexport const normalizeUrl = (url) =&gt; url?.replace(/\\/$/, &quot;&quot;)\n\nexport default function SEOHead({ title, description, image, url }) {\n  const cleanedUrl = normalizeUrl(url)\n  return (\n    &lt;&gt;\n      &lt;meta charSet=&quot;utf-8&quot; /&gt;\n      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;\n      &lt;meta name=&quot;robots&quot; content=&quot;index, follow&quot; /&gt;\n      &lt;title&gt;{title}&lt;/title&gt;\n      &lt;meta name=&quot;description&quot; content={description || &quot;Default description&quot;} /&gt;\n      {cleanedUrl &amp;&amp; &lt;link rel=&quot;canonical&quot; href={cleanedUrl} /&gt;}\n      &lt;meta property=&quot;og:title&quot; content={title} /&gt;\n      &lt;meta property=&quot;og:description&quot; content={description || &quot;Default description&quot;} /&gt;\n      &lt;meta property=&quot;og:url&quot; content={cleanedUrl} /&gt;\n      {image &amp;&amp; &lt;meta property=&quot;og:image&quot; content={image.url} /&gt;}\n    &lt;/&gt;\n  )\n}</code></p><p><code></code></p><hr/><p><code></code></p><h4><b>Using </b><b><code>normalizeUrl</code></b><b> in </b><b><code>Head</code></b><b> Component</b></h4><p><code>import SEOHead, { normalizeUrl } from &quot;../components/head&quot;\n\nexport const Head = (props) =&gt; {\n  const { page, site, contentfulPage } = props.data\n  const siteMetadata = site.siteMetadata\n\n  const title = contentfulPage?.seoTitle || page.title || siteMetadata.title\n  const description = page.description || siteMetadata.description\n  const image = page.image || null\n  const url = normalizeUrl(`${siteMetadata.siteUrl}/${page.slug}`)\n\n  return (\n    &lt;SEOHead\n      title={title}\n      description={description}\n      image={image}\n      url={url}\n    /&gt;\n  )\n}</code></p><hr/><h3><b>3. Gatsby Configuration for Trailing Slash Handling</b></h3><p>You can control trailing slashes site-wide by modifying them </p><p><code>gatsby-config.js</code>:</p><p><code>module.exports = {\n  trailingSlash: &quot;never&quot;, // Options: &quot;always&quot;, &quot;never&quot;, &quot;ignore&quot;\n}</code></p><p><code></code></p><p>This ensures that Gatsby generates URLs <b>without</b> trailing slashes by default.</p><hr/><h3><b>Final Notes</b></h3><ul><li><p>✅ Prioritize Contentful for better metadata control.</p></li><li><p> ✅ Use dynamic methods to prevent trailing slashes. </p></li><li><p>✅ Configure settings to enforce site-wide URL consistency.</p></li></ul><p></p>","category":"SEO","date":"January 29, 2025","image":{"id":"9bc9bbc2-1562-5628-8c4f-acb81bd84161","url":"https://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=192&h=100&q=50&fm=webp&fit=fill 192w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=384&h=200&q=50&fm=webp&fit=fill 384w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=768&h=400&q=50&fm=webp&fit=fill 768w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=1536&h=800&q=50&fm=webp&fit=fill 1536w","sizes":"(min-width: 768px) 768px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=768&h=400&fl=progressive&q=50&fm=jpg&fit=fill","srcSet":"https://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=192&h=100&fl=progressive&q=50&fm=jpg&fit=fill 192w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=384&h=200&fl=progressive&q=50&fm=jpg&fit=fill 384w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=768&h=400&fl=progressive&q=50&fm=jpg&fit=fill 768w,\nhttps://images.ctfassets.net/rpilh1nqkh8b/UIAlsK2E7lJ8IHmyXmaYA/ba58e4a0f685c38960e4b663103b042b/ilya-pavlov-OqtafYT5kTw-unsplash.jpg?w=1536&h=800&fl=progressive&q=50&fm=jpg&fit=fill 1536w","sizes":"(min-width: 768px) 768px, 100vw"}},"layout":"constrained","backgroundColor":"#282828","width":768,"height":400},"alt":"Code"}}},"pageContext":{"id":"c96653ba-5973-5247-b9b9-61efe60afe4c"}},"staticQueryHashes":[],"slicesMap":{"footer":"footer","header":"header"}}